var AssetAdapter=function(){function t(){}var e=(__define,t),s=e.prototype;return s.getAsset=function(t,e,s){function i(i){e.call(s,i,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?i(a):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var MixGame;!function(t){function e(t,e){var s=t,i=e+1;if(s>=i)return s;if(0>s)return 0;var a=Math.floor(Math.random()*(i-s)+s);return a>i?a=i:s>a&&(a=s),a}function s(t){for(var e,s=[],i={},a=0;null!=(e=t[a]);a++)i[e]||(s.push(e),i[e]=!0);return s}function i(e,s){s>e.length&&(s=e.length);for(var i=[],a=e.slice(0),n=0;s>n;n++){var r=t.getRandom(0,a.length-1);i.push(a[r]),a.splice(r,1)}return i}var a=function(){function t(){}var e=(__define,t);e.prototype;return t.VERSION="1.0.0-技术测试",t.NAME="消消萌货",t}();t.GAME_INFO=a,egret.registerClass(a,"MixGame.GAME_INFO");var n=function(){function e(){}var s=(__define,e);s.prototype;return e.init=function(){t.DataEye.initWeb()},e.initWeb=function(){var e="";window.location.href.indexOf("192.168")>-1?(console.log("内网统计 启动"),e="C6D463C754827CFD69FBF6F5C6860E9C4"):e=t.DataEye.APPID;var s={appId:e,channel:window.location.host,appVersion:t.GAME_INFO.VERSION,osVersion:egret.Capabilities.os};DCAgent.init(s);var i=window.location.href.indexOf("?"),a=window.location.href.indexOf("#"),n=0;n=a>i?i:a;var r=window.location.href.slice(0,n);DCAgent.onEvent("完整游戏地址",{href:r})},e.initNav=function(){var e={appId:t.DataEye.APPID,channel:"NavApp",appVersion:t.GAME_INFO.VERSION,osVersion:egret.Capabilities.os};DCAgent.init(e),DCAgent.onEvent("游戏地址",{href:"I am App"})},e.APPID="C099BCFB47EF216F854EC2BD495CEB4BA",e}();t.DataEye=n,egret.registerClass(n,"MixGame.DataEye");var r=function(){function t(){}var e=(__define,t);e.prototype;return t.PaySend=function(t,e){var s={};s.goodsId=t,s.goodsNumber="1",s.serverId="1",s.ext=e,nest.iap.pay(s,function(t){0==t.result||-1==t.result})},t}();t.Pay=r,egret.registerClass(r,"MixGame.Pay");var o=function(){function e(){}var s=(__define,e);s.prototype;return e.init=function(){var e={};e.egretAppId=90026,e.version=2,e.debug=!0,nest.core.startup(e,function(e){0==e.result?t.EgretOpenLogin.isSupport():Main.UserLoginFail("打开游戏egret登陆失败")})},e.isSupport=function(){t.EgretOpenLogin.checkLogin()},e.checkLogin=function(){nest.user.checkLogin({},function(e){console.log("c data",e),e.token?t.User.init(e,!0):t.EgretOpenLogin.login()})},e.login=function(){nest.user.login({},function(e){e.token?(t.User.init(e,!1),console.log("Login")):Main.UserLoginFail("授权时登陆失败")})},e.loginOut=function(){nest.user.logout({},function(t){0==t.result&&console.log("用户 退出")}),egret.localStorage.removeItem("EgretH5SdkPlayerId"),egret.localStorage.removeItem("EgretH5SdkUserInfo")},e}();t.EgretOpenLogin=o,egret.registerClass(o,"MixGame.EgretOpenLogin");var h=function(){function e(){}var s=(__define,e);s.prototype;return e.init=function(e,s){AV.initialize("MOPqaLCgc3KpzR955JNK31us-gzGzoHsz","qNtFIDT9rJSELVOkY4qBfMxN"),t.User.CheckUser(e,s)},e.RegisterUserInit=function(t){t.set("passInfo",[]),t.set("power",30);var e=new Date;t.set("powerTime",e),t.set("gold",0),t.set("dim",0),t.save()},e.RegisterUser=function(e){var s=AV.Object["new"]("LoginUser");s.set("mixToken",e.token),s.set("mixId",e.id);for(var i=["m","i","x","g","a","m","e"],a="",n=0;16>n;n++)a+=i[t.getRandom(0,i.length-1)],a+=t.getRandom(0,9)+"";s.set("mixWord",a),s.save().then(function(e){var s=new AV.User;s.set("username",e.id),s.set("password",e.get("mixWord")),s.signUp().then(function(e){t.User.RegisterUserInit(e),Main.UserLoginSuccess()},function(t){egret.error("注册用户和密码 失败",t),Main.UserLoginFail("用token和id注册失败")})},function(t){egret.error(t)})},e.CheckUser=function(e,s){var i=AV.Object.extend("LoginUser"),a=new AV.Query(i);s||a.equalTo("mixToken",e.token),a.equalTo("mixId",e.id),a.find().then(function(s){0===s.length?(console.log("========新注册用户========"),t.User.RegisterUser(e)):AV.User.logIn(s[0].id,s[0].get("mixWord")).then(function(){Main.UserLoginSuccess()},function(t){egret.error("登陆user失败",t),Main.UserLoginFail("用获得的user名和密码登陆失败")})},function(){Main.UserLoginFail("查询login user失败")})},e}();t.User=h,egret.registerClass(h,"MixGame.User"),t.getRandom=e,t.unique=s,t.getRandomArr=i}(MixGame||(MixGame={}));var MixGameSound=function(){function t(){this.Bgm=new egret.Sound,this.StarEff_click=new egret.Sound,this.StarEff_clear=new egret.Sound,this.StarEff_drop=new egret.Sound,this.StarEff_step=new egret.Sound,t.self=this,this.initSound()}var e=__define,s=t,i=s.prototype;return i.initSound=function(){this.Bgm.load("resource/sound/fever_bgm.mp3"),this.Bgm.type=egret.Sound.MUSIC,this.Bgm.addEventListener(egret.Event.COMPLETE,function(){this.BgmChannel=this.Bgm.play(0,-1)},this),this.StarEff_click.load("resource/sound/button_click.mp3"),this.StarEff_clear.load("resource/sound/booster_equip.mp3"),this.StarEff_drop.load("resource/sound/block_down.mp3"),this.StarEff_step.load("resource/sound/heart_send.mp3")},i.playEffSound=function(t){this._allSoundSwitch&&this["StarEff_"+t].play(0,1)},e(i,"allSoundSwitch",function(){return this._allSoundSwitch},function(t){this._allSoundSwitch=t,t?this.BgmChannel.volume=1:this.BgmChannel.volume=0}),t}();egret.registerClass(MixGameSound,"MixGameSound");var MixGameUser;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.getAllPassInfo=function(){return MixGame.User.data.get("passInfo")},t.getOnePassInfoForId=function(t){var e=MixGame.User.data.get("passInfo");return e[t-1]},t.setOnePassInfo=function(t){var e=MixGame.User.data.get("passInfo");e[t.id-1]?(e[t.id-1].star=t.star,e[t.id-1].point=t.point):e[t.id-1]={id:t.id,star:t.star,point:t.point},MixGame.User.data.set("passInfo",e),MixGame.User.data.save(),console.log("save关卡",t)},t.nowPassMax=0,t}();t.Pass=e,egret.registerClass(e,"MixGameUser.Pass");var s=function(){function t(){}var e=(__define,t);e.prototype;return t.getGold=function(){return MixGame.User.data.get("gold")},t.getDim=function(){return MixGame.User.data.get("dim")},t.addGold=function(t){MixGame.User.data.increment("gold",t),MixGame.User.data.save()},t.addDim=function(t){MixGame.User.data.increment("dim",t),MixGame.User.data.save()},t}();t.Info=s,egret.registerClass(s,"MixGameUser.Info")}(MixGameUser||(MixGameUser={}));var Main=function(t){function e(){t.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(e,t);var s=(__define,e),i=s.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},i.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("open")},i.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},i.onResourceLoadComplete=function(t){"open"===t.groupName&&(this.isResourceLoadEnd=!0,this.createScene()),"login"===t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.gameView||(this.gameView=new GameView),this.stage.addChild(this.gameView),this.stage.removeChild(this.loadingUi),this.gameView.gotoHome())},i.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},i.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},i.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},i.onResourceProgress=function(t){"login"===t.groupName&&this.loadingUi.setProgress(t.itemsLoaded,t.itemsTotal)},i.startCreateScene=function(){e.self=this,this.loadingUi=new GameLoading,this.loadingUi.height=this.stage.stageHeight,this.stage.addChild(this.loadingUi),MixGame.DataEye.init(),MixGame.EgretOpenLogin.init()},e.UserLoginSuccess=function(){MixGame.User.data=AV.User.current(),DCAgent.login(MixGame.User.data.id),e.self.loadingUi.initLoading("login")},e.UserLoginFail=function(t){DCAgent.onEvent("登陆失败",t),egret.error(t)},i.UserLoginOut=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),MixGame.EgretOpenLogin.loginOut(),this.stage.removeChild(this.gameView),this.stage.addChild(this.loadingUi)},e}(eui.UILayer);egret.registerClass(Main,"Main");var GameScript;!function(t){var e;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t}();t.Base=e,egret.registerClass(e,"GameScript.Boss.Base")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=1,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=3}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_1=s,egret.registerClass(s,"GameScript.Boss.boss_1")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=10,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=98}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_10=s,egret.registerClass(s,"GameScript.Boss.boss_10")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=11,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=108}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_11=s,egret.registerClass(s,"GameScript.Boss.boss_11")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=12,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=118}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_12=s,egret.registerClass(s,"GameScript.Boss.boss_12")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=2,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=18}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_2=s,egret.registerClass(s,"GameScript.Boss.boss_2")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=3,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=28}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_3=s,egret.registerClass(s,"GameScript.Boss.boss_3")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=4,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=38}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_4=s,egret.registerClass(s,"GameScript.Boss.boss_4")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=5,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=48}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_5=s,egret.registerClass(s,"GameScript.Boss.boss_5")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=6,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=58}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_6=s,egret.registerClass(s,"GameScript.Boss.boss_6")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=7,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=68}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_7=s,egret.registerClass(s,"GameScript.Boss.boss_7")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=8,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=78}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_8=s,egret.registerClass(s,"GameScript.Boss.boss_8")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(e){var s=function(t){function e(){t.call(this),this.bossId=9,this.bossImg="pass_monster_img_"+this.bossId,this.bossName="剑刺虎",this.bossInfo="草原萌虎",this.unlockMin=88}__extends(e,t);var s=(__define,e);s.prototype;return e}(t.Boss.Base);e.boss_9=s,egret.registerClass(s,"GameScript.Boss.boss_9")}(e=t.Boss||(t.Boss={}))}(GameScript||(GameScript={}));var GameScript;!function(t){var e;!function(t){t.skill_1={name:"爆炸"}}(e=t.Skill||(t.Skill={}))}(GameScript||(GameScript={}));var ThemeAdapter=function(){function t(){}var e=(__define,t),s=e.prototype;return s.getTheme=function(t,e,s,i){function a(t){e.call(i,t)}function n(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),s.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var GameConfig;!function(t){var e=function(){function e(){}var s=(__define,e);s.prototype;return e.getImgForLoadInfo=function(e){var s="";switch(e.typeId){case t.StarType.NULL:s="";break;case t.StarType.STAR:s="star_monster_"+e.colorId;break;case t.StarType.STONE:s="star_rect_"+e.colorId}return s},e.getImg=function(e){var s={typeId:e[0],colorId:e[1]};return t.StarOneImg.getImgForLoadInfo(s)},e}();t.StarOneImg=e,egret.registerClass(e,"GameConfig.StarOneImg");var s=function(){function t(){}var e=(__define,t);e.prototype;return t.START=-1,t.PLAY=0,t.CHANGE_POS=1,t.CHANGE_COLOR=2,t.AGAIN_ARRAY=3,t}();t.StarViewState=s,egret.registerClass(s,"GameConfig.StarViewState");var i=function(){function t(){}var e=(__define,t);e.prototype;return t.NULL=-1,t.STAR=0,t.STONE=3,t}();t.StarType=i,egret.registerClass(i,"GameConfig.StarType");var a=function(){function t(){}var e=(__define,t);e.prototype;return t.STAR_IMG="ui_pass_starIcon",t.UN_STAR_IMG="ui_pass_unstarIcon",t}();t.Pass=a,egret.registerClass(a,"GameConfig.Pass");var n=function(){function t(){}var e=(__define,t);e.prototype;return t.CLEAR_STAR_ON_TASK=0,t.CLEAR_STAR_NOT_TASK=1,t}();t.EffName=n,egret.registerClass(n,"GameConfig.EffName")}(GameConfig||(GameConfig={}));var MonsterFightShow=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var s=(__define,e);s.prototype;return e}(eui.Component);egret.registerClass(MonsterFightShow,"MonsterFightShow");var AllPassInfo=function(){function t(){}var e=(__define,t);e.prototype;return t.pass_1=function(){var t={typeId:0,colorId:-1},e={typeId:-1,colorId:-1},s={typeId:3,colorId:-1};StarView.ThePassStarInfoArr=[[t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,s,t,t,t],[s,t,e,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,e,t,t,s,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,e,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,t,s,t,t,t,t,t,t]],StarView.ThePassTaskInfoArr=[];var i={};i.task_type=0,i.task_number=10,i.task_star={},i.task_star.typeId=0,i.task_star.colorId=1,StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":0,"task_number":3,"task_star":{"typeId":0,"colorId":1}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":0,"task_number":3,"task_star":{"typeId":0,"colorId":2}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":0,"task_number":3,"task_star":{"typeId":0,"colorId":3}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":0,"task_number":4,"task_star":{"typeId":0,"colorId":4}}')),StarView.ThePassPointInfoArr=[200,300,800,5e3],StarView.ThePassTaskStep=25},t.pass_2=function(){var t={typeId:0,colorId:-1},e={typeId:-1,colorId:-1},s={typeId:3,colorId:-1};StarView.ThePassStarInfoArr=[[t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,s,t,t,t],[s,t,e,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,e,t,t,s,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,e,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t],[t,t,t,s,t,t,t,t,t,t]],StarView.ThePassTaskInfoArr=[],StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":0,"task_number":99,"task_star":{"typeId":0,"colorId":1}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":-1,"task_number":99,"task_star":{"typeId":0,"colorId":2}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":-1,"task_number":99,"task_star":{"typeId":0,"colorId":3}}')),StarView.ThePassTaskInfoArr.push(JSON.parse('{"task_type":-1,"task_number":99,"task_star":{"typeId":0,"colorId":4}}')),StarView.ThePassPointInfoArr=[580,880,1580,5e3],StarView.ThePassTaskStep=31},t.PassIndexMax=61,t}();egret.registerClass(AllPassInfo,"AllPassInfo");var SkillDataGather=function(){function t(){t.self=this,t.loadPlayerSkillData()}var e=(__define,t),s=e.prototype;return t.loadPlayerSkillData=function(){t.self.skill_1_data={},t.self.skill_2_data={},t.self.skill_3_data={},t.self.skill_4_data={},t.self.skill_5_data={},t.self.skill_1_data.skillLv=1,t.self.skill_2_data.skillLv=1,t.self.skill_3_data.skillLv=1,t.self.skill_4_data.skillLv=1,t.self.skill_5_data.skillLv=1,t.self.skill_1_config(),t.self.skill_2_config(),t.self.skill_3_config(),t.self.skill_4_config(),t.self.skill_5_config()},t.setPlayerSkillData=function(t){},s.skill_1_config=function(){this.skill_1_data.skillName="相邻交换",this.skill_1_data.skillId=1,this.skill_1_data.skillMp=10,this.skill_1_data.skillCd=5,this.skill_1_data.skillAddStep=0,this.skill_1_data.skillFunc=function(){GameView.self.gamePlayMain.useSkill(GameConfig.StarViewState.CHANGE_POS)}},s.skill_2_config=function(){this.skill_2_data.skillName="变色",this.skill_2_data.skillId=2,this.skill_2_data.skillMp=10,this.skill_2_data.skillCd=5,this.skill_2_data.skillAddStep=0,this.skill_2_data.skillFunc=function(){GameView.self.gamePlayMain.useSkill(GameConfig.StarViewState.CHANGE_COLOR)}},s.skill_3_config=function(){this.skill_3_data.skillName="重新排列",this.skill_3_data.skillId=3,this.skill_3_data.skillMp=10,this.skill_3_data.skillCd=5,this.skill_3_data.skillAddStep=0,this.skill_3_data.skillFunc=function(){GameView.self.gamePlayMain.useSkill(GameConfig.StarViewState.AGAIN_ARRAY)}},s.skill_4_config=function(){this.skill_4_data.skillName="增加步数",this.skill_4_data.skillId=4,this.skill_4_data.skillMp=20,this.skill_4_data.skillCd=5,this.skill_4_data.skillAddStep=5,this.skill_4_data.skillFunc=function(){console.log("点击了我",this)}},s.skill_5_config=function(){this.skill_5_data.skillName="重置冷却",this.skill_5_data.skillId=5,this.skill_5_data.skillMp=10,this.skill_5_data.skillCd=5,this.skill_5_data.skillAddStep=0,this.skill_5_data.skillFunc=function(){GameView.self.showPassStarMain()}},t}();egret.registerClass(SkillDataGather,"SkillDataGather");var GameEff=function(t){function e(){t.call(this),this.effArr=[],this.starLayer=new eui.Group,this.pointLayer=new eui.Group,this.top=0,this.left=0,this.right=0,this.bottom=0,this.touchEnabled=!1,this.touchChildren=!1,this.starLayer.width=this.width,this.starLayer.height=this.height,this.pointLayer.width=this.width,this.pointLayer.height=this.height,this.addChild(this.starLayer),this.addChild(this.pointLayer),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.addToStage=function(){console.log("特效播放层 被添加到舞台"),this.starLayer.removeChildren(),this.pointLayer.removeChildren()},i.getEff=function(t){if(this.effArr.length<1)var e=new eui.Image;else var e=this.effArr.shift();return egret.Tween.removeTweens(e),e.rotation=0,e.source=GameConfig.StarOneImg.getImg([t.typeId,t.colorId]),e.x=t.clearPosPoint.x,e.y=t.clearPosPoint.y,e.width=t.starImg.width,e.height=t.starImg.height,e.scaleX=t.starImg.scaleX,e.scaleY=t.starImg.scaleY,e.anchorOffsetX=0,e.anchorOffsetY=0,e},i.reEff=function(t){this.effArr.push(t),this.starLayer.removeChild(t)},i.playEffForName=function(t,e,s){switch(t){case GameConfig.EffName.CLEAR_STAR_ON_TASK:var i=this.getEff(e);this.starLayer.addChild(i);var a=50*e.posY+300;egret.Tween.get(i).to({x:s.x,y:s.y},a).call(function(){this.reEff(i)},this);break;case GameConfig.EffName.CLEAR_STAR_NOT_TASK:for(var n=0;3>n;n++){var i=this.getEff(e);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x+=i.width/2*i.scaleX,i.y+=i.height/2*i.scaleY,i.scaleX*=.5,i.scaleY*=.5,this.starLayer.addChild(i),this.playStarToBorder(i,!0)}}},i.playStarToBorder=function(t,e){e&&egret.Tween.get(t,{loop:!0}).to({rotation:180},100).to({rotation:360},100).call(function(){t.rotation=0},this);var s,i,a=MixGame.getRandom(1,4);1===a?(s=MixGame.getRandom(0,this.width),i=-40):2===a?(s=MixGame.getRandom(0,this.width),i=this.height+40):3===a?(s=-40,i=MixGame.getRandom(0,this.height)):4===a&&(s=this.width+40,i=MixGame.getRandom(0,this.height));var n=200*MixGame.getRandom(3,5)+200;egret.Tween.get(t).to({x:s,y:i},n).call(function(){var s=MixGame.getRandom(1,6);e&&2>s?this.playStarToBorder(t,!1):this.reEff(t)},this)},e}(eui.Component);egret.registerClass(GameEff,"GameEff");var GameLoading=function(t){function e(){t.call(this),this.skinName="GameLoadingSkin",this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickLoginBtn,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initLoading=function(t){switch(t){case"login":RES.loadGroup("login")}},i.setProgress=function(t,e){this.loadingBar.maximum=e,this.loadingBar.value=t},i.onClickLoginBtn=function(){MixGame.EgretOpenLogin.login()},e}(eui.Component);egret.registerClass(GameLoading,"GameLoading");var GameView=function(t){function e(){t.call(this),this.EffList=[],this.nowSkinState="",e.self=this,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.getCurrentState=function(){return this.nowSkinState},i.addToStage=function(){this.initLoadGameData(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)},i.initLoadGameData=function(){this.height=Main.self.stage.stageHeight;new SkillDataGather;this.gameHomeMain=new GameHome,this.gamePlayMain=new GamePlay,this.gameHomeMain.height=this.height,this.gamePlayMain.height=this.height,this.EffBox=new GameEff,this.passStartMain=new PassStartMain,this.dimShopMain=new ShopMain,this.dimShopMain.skinName="DimShopMainSkin",this.dimShopMain.horizontalCenter=0,this.dimShopMain.verticalCenter=0},i.gotoHome=function(){this.passStartMain.visible=!1,this.closeDimShop(),this.getChildIndex(this.EffBox)>=0&&this.removeChild(this.EffBox),this.getChildIndex(this.gameHomeMain)<0&&(this.addChildAt(this.gameHomeMain,0),this.gameHomeMain.initGameHome()),this.getChildIndex(this.gamePlayMain)>=0&&this.removeChild(this.gamePlayMain)},i.gotoPlay=function(t){this.passStartMain.visible=!1,this.closeDimShop(),this.getChildIndex(this.gamePlayMain)<0&&this.addChildAt(this.gamePlayMain,0),this.getChildIndex(this.gameHomeMain)>=0&&this.removeChild(this.gameHomeMain),this.getChildIndex(this.EffBox)<0&&this.addChild(this.EffBox),this.gamePlayMain.gamePlayStar(t)},i.showPassStarMain=function(t){this.getChildIndex(this.passStartMain)<0&&this.addChild(this.passStartMain),t&&this.passStartMain.loadPassInfoAndShow(t),this.passStartMain.visible=!0,this.passStartMain.touchEnabled=!0,this.passStartMain.touchChildren=!0},i.openDimShop=function(){this.getChildIndex(this.dimShopMain)<0&&this.addChild(this.dimShopMain)},i.closeDimShop=function(){this.getChildIndex(this.dimShopMain)>=0&&this.removeChild(this.dimShopMain)},e}(eui.Component);egret.registerClass(GameView,"GameView");var GameHome=function(t){function e(){t.call(this),this.skinName="GameHomeSkin",this.initGameHome()}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initGameHome=function(){this.playerDataShow.initPlayerDataShow(),this.passSelectShow.loadAllPassInfo()},e}(eui.Component);egret.registerClass(GameHome,"GameHome");var PassClickBtn=function(t){function e(){t.call(this),this.isCanClick=!1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initBtn=function(t){this.data=t,this.passIndex.text=this.data.id+"",this.data.id-1>MixGameUser.Pass.nowPassMax?(this.clickBg.source="ui_starOneBg_1",this.star_1.visible=!1,this.star_2.visible=!1,this.star_3.visible=!1,this.isCanClick=!1):(this.clickBg.source="ui_starOneBg_0",this.star_1.visible=!0,this.star_2.visible=!0,this.star_3.visible=!0,this.isCanClick=!0,this.setStarNumber())},i.onClick=function(){this.isCanClick?GameView.self.showPassStarMain(this.data):console.log("还不可以进行此关卡")},i.setStarNumber=function(){var t=GameConfig.Pass.STAR_IMG,e=GameConfig.Pass.UN_STAR_IMG;this.data.star>0?this.star_1.source=t:this.star_1.source=e,this.data.star>1?this.star_2.source=t:this.star_2.source=e,this.data.star>2?this.star_3.source=t:this.star_3.source=e},e}(eui.Button);egret.registerClass(PassClickBtn,"PassClickBtn");var PassItemRenderer=function(t){function e(){t.call(this),this.skinName="PassItemRendererSkin"}__extends(e,t);var s=(__define,e),i=s.prototype;return i.dataChanged=function(){var t=(this.data.id+4)%10;if(this.clickBtn.x=60*Math.abs(t-5),this.clickBtn.initBtn(this.data),this.data.id%5===1&&1!==this.data.id){var e=(this.data.id-1)/5,s=PassMonster.Boss[e-1];this.addChild(s),s.verticalCenter=0,e%2===0?s.horizontalCenter=80:s.horizontalCenter=-110,s.initMonster()}},e}(eui.ItemRenderer);egret.registerClass(PassItemRenderer,"PassItemRenderer");var PassMonster=function(t){function e(e){t.call(this),this.bossId=e,this.skinName="PassMonsterSkin",this.bossData=new GameScript.Boss["boss_"+e],this.icon=this.bossData.bossImg,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.onTouch=function(){},i.initMonster=function(){GameView.self.gameHomeMain.playerDataShow.starMax>=this.bossData.unlockMin?(this.bgImg.source="ui_starOneBg_0",this.unlock.visible=!1):(this.bgImg.source="ui_starOneBg_1",this.unlock.visible=!0,this.unlockBit.text=this.bossData.unlockMin+"")},e.Boss=[],e}(eui.Button);egret.registerClass(PassMonster,"PassMonster");var PassSelectShow=function(t){function e(){t.call(this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.loadAllPassInfo=function(){if(MixGameUser.Pass.nowPassMax=MixGameUser.Pass.getAllPassInfo().length,PassMonster.Boss.length<1)for(var t=Math.floor(AllPassInfo.PassIndexMax/5),e=0;t>e;e++){var s=new PassMonster(e+1);PassMonster.Boss.push(s)}this.initPassInfoData(),this.passList.dataProvider=this.passData,this.passListScroll.viewport.scrollV=40*(this.passData.length-MixGameUser.Pass.nowPassMax)-Main.self.stage.stageHeight+240},i.initPassInfoData=function(){for(var t=MixGameUser.Pass.getAllPassInfo(),e=[],s=AllPassInfo.PassIndexMax-1;s>=0;s--){var i={id:0,star:0,point:0};s<=t.length-1?e.push(t[s]):(i.id=s+1,i.star=0,i.point=0,e.push(i))}this.passData=new eui.ArrayCollection(e)},i.getPassData=function(t){var e;if(t>AllPassInfo.PassIndexMax)return void egret.error("传入关卡id错误，超过最大关卡数");var s=this.passData.length-t;return e=this.passData.getItemAt(s)},e}(eui.Component);egret.registerClass(PassSelectShow,"PassSelectShow");var PassStartMain=function(t){function e(){t.call(this),this.skinName="PassStartMainSkin",this.horizontalCenter=0,this.verticalCenter=0,this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startPlay,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchCancel,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitPassMain,this),this.visible=!1,this.touchEnabled=!1,this.touchChildren=!1}__extends(e,t);var s=(__define,e),i=s.prototype;return i.onTouchBegin=function(t){t.target.scaleX=t.target.scaleY=.8},i.onTouchCancel=function(t){t.target.scaleX=t.target.scaleY=1},i.startPlay=function(){this.startBtn.scaleX=this.startBtn.scaleY=1,egret.Tween.get(this.startBtn).to({scaleX:1,scaleY:1},200).call(function(){GameView.self.gotoPlay(this.passData.id)},this)},i.exitPassMain=function(){this.exitBtn.scaleX=this.startBtn.scaleY=1,egret.Tween.get(this.startBtn).to({scaleX:1,scaleY:1},200).call(function(){GameView.self.passStartMain.visible=!1,GameView.self.passStartMain.touchEnabled=!1,GameView.self.passStartMain.touchChildren=!1,GameView.self.gotoHome()},this)},i.loadPassInfoAndShow=function(t){console.log("展示关卡数据",t),this.passData=t,this.initPassStartMain()},i.initPassStartMain=function(){this.idLabel.text="第"+this.passData.id+"关",this.pointMaxBit.text=""+this.passData.point,this.passData.star>0?this.star_1.source=GameConfig.Pass.STAR_IMG:this.star_1.source=GameConfig.Pass.UN_STAR_IMG,this.passData.star>1?this.star_2.source=GameConfig.Pass.STAR_IMG:this.star_2.source=GameConfig.Pass.UN_STAR_IMG,this.passData.star>2?this.star_3.source=GameConfig.Pass.STAR_IMG:this.star_3.source=GameConfig.Pass.UN_STAR_IMG},e}(eui.Component);egret.registerClass(PassStartMain,"PassStartMain");var PlayerDataShow=function(t){function e(){t.call(this),this.starMax=0,this.skinName="PlayerDataShowSkin",this.dimIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickDimIcon,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initPlayerDataShow=function(){this.goldBit.text=MixGameUser.Info.getGold()+"",this.dimBit.text=MixGameUser.Info.getDim()+"";for(var t=MixGameUser.Pass.getAllPassInfo(),e=0;e<t.length;e++)this.starMax+=t[e].star;this.starBit.text=this.starMax+""},i.onClickUserIcon=function(){Main.self.UserLoginOut()},i.onClickDimIcon=function(){GameView.self.openDimShop()},e}(eui.Component);egret.registerClass(PlayerDataShow,"PlayerDataShow");var LeanView=function(t){function e(){t.call(this)}__extends(e,t);var s=(__define,e);s.prototype;return e}(eui.Component);egret.registerClass(LeanView,"LeanView");var BalanceMain=function(t){function e(){t.call(this),this.skinName="BalanceMainSkin",this.rePlayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rePlayTheGame,this),this.exitBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.exitTheGame,this),this.nextPassBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextPassTheGame,this)
}__extends(e,t);var s=(__define,e),i=s.prototype;return i.rePlayTheGame=function(){this.visible=!1,GameView.self.showPassStarMain()},i.exitTheGame=function(){this.visible=!1,GameView.self.gotoHome()},i.nextPassTheGame=function(){this.visible=!1;var t=StarView.ThePassId+1,e=GameView.self.gameHomeMain.passSelectShow.getPassData(t);console.log(e),GameView.self.showPassStarMain(e)},i.loadGameOver=function(t){t?(console.log("过关"),this.passIsSuc.text="过关",StarView.ThePassId<AllPassInfo.PassIndexMax?this.nextPassBtn.visible=!0:this.nextPassBtn.visible=!1,this.rePlayBtn.visible=!1):(console.log("失败"),this.passIsSuc.text="失败",this.nextPassBtn.visible=!1,this.rePlayBtn.visible=!0),this.pointBit.text=GameView.self.gamePlayMain.pointPlayShow.pointData.point+"",this.getGold.text="30"},e}(eui.Component);egret.registerClass(BalanceMain,"BalanceMain");var GamePlay=function(t){function e(){t.call(this),this.skinName="GamePlaySkin",this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCanCelBtn,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.clickCanCelBtn=function(){switch(StarView.state){case GameConfig.StarViewState.CHANGE_POS:this.starView.changePos(-1);break;case GameConfig.StarViewState.CHANGE_COLOR:this.starView.changeColor(-1)}this.useSkillBg.visible=!1,this.cancelBtn.visible=!1},i.gamePlayStar=function(t){this.useSkillBg.visible=!1,this.cancelBtn.visible=!1,this.balanceMain.visible=!1,this.starView.visible=!1,this.taskPlayShow.visible=!1,this.skillPlayShow.visible=!1,this.pointPlayShow.visible=!1,this.starView.gameStart(t)},i.gamePassInfoSave=function(){var t={id:0,point:0,star:0};t.id=StarView.ThePassId,t.point=this.pointPlayShow.pointData.point;var e=StarView.ThePassPointInfoArr;t.point>=e[0]&&(t.star=1),t.point>=e[1]&&(t.star=2),t.point>=e[2]&&(t.star=3);var s=!1,i={};i.id=t.id;var a=MixGameUser.Pass.getOnePassInfoForId(t.id);a?(a.point>=t.point?i.point=a.point:(i.point=t.point,s=!0),a.star>=t.star?i.star=a.star:(i.star=t.star,s=!0)):MixGameUser.Pass.setOnePassInfo(t),s&&MixGameUser.Pass.setOnePassInfo(i)},i.gameOverShow=function(t){StarView.self.StarBox.removeChildren(),this.balanceMain.visible=!0,this.starView.visible=!1,this.useSkillBg.visible=!0,this.balanceMain.loadGameOver(t),t&&this.gamePassInfoSave()},i.showTaskMain=function(){this.taskPlayShow.top=320,this.pointPlayShow.horizontalCenter=-this.pointPlayShow.width,this.taskPlayShow.loadTaskInfo(StarView.ThePassTaskInfoArr),this.pointPlayShow.initPointPlayShow(StarView.ThePassPointInfoArr),this.taskPlayShow.visible=!0,egret.Tween.get(this.taskPlayShow).wait(500).to({top:0},500).call(this.starViewPlay,this)},i.starViewPlay=function(){GameView.self.touchChildren=!0,this.skillPlayShow.visible=!0,this.starView.visible=!0,this.pointPlayShow.visible=!0,egret.Tween.get(this.pointPlayShow).to({horizontalCenter:0},1500,egret.Ease.backInOut)},i.useSkill=function(t){switch(this.useSkillBg.visible=!0,this.cancelBtn.visible=!0,t){case GameConfig.StarViewState.CHANGE_POS:this.starView.changePos(0);break;case GameConfig.StarViewState.CHANGE_COLOR:this.starView.changeColor(0);break;case GameConfig.StarViewState.AGAIN_ARRAY:this.starView.allStarAgainArray(),this.clickCanCelBtn()}},i.allTaskComplete=function(){return this.taskPlayShow.task_1.isComplete&&this.taskPlayShow.task_2.isComplete&&this.taskPlayShow.task_3.isComplete&&this.taskPlayShow.task_4.isComplete?(this.gameOverShow(!0),!1):!0},e}(eui.Component);egret.registerClass(GamePlay,"GamePlay");var PointPlayShow=function(t){function e(){t.call(this),this.pointData={}}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initPointData=function(){this.pointData||(this.pointData={}),this.pointData.clear=0,this.pointData.clearOnce=0,this.pointData.combo=0,this.pointData.comboMax=0,this.pointData.point=0,this.pointData.pointTask_Max=0,this.pointData.pointTask_1=0,this.pointData.pointTask_2=0,this.pointData.pointTask_3=0},i.initPointPlayShow=function(t){this.initPointData(),this.pointData.pointTask_1=t[0],this.pointData.pointTask_2=t[1],this.pointData.pointTask_3=t[2],this.pointData.pointTask_Max=t[3],this.pointBar.width=0,this.point.text="0",this.img_1.x=t[0]/t[2]*300,this.img_2.x=t[1]/t[2]*300,this.img_3.x=300,this.img_1.source="ui_pass_unstarIcon",this.img_2.source="ui_pass_unstarIcon",this.img_3.source="ui_pass_unstarIcon"},i.addPointForClearStar=function(t){0===t.typeId&&(this.pointData.point+=10),this.updatePointBar(),this.updatePointTaskImg()},i.updatePointBar=function(){if(this.pointData.point>this.pointData.pointTask_Max)this.pointBar.width=465;else if(this.pointData.point>this.pointData.pointTask_3){var t=this.pointData.point-this.pointData.pointTask_3;this.pointBar.width=300+Math.floor(t/(this.pointData.pointTask_Max-this.pointData.pointTask_3)*165)}else this.pointBar.width=Math.floor(this.pointData.point/this.pointData.pointTask_3*300);this.point.text=this.pointData.point+""},i.updatePointTaskImg=function(){this.pointData.point>=this.pointData.pointTask_1&&(this.img_1.source="ui_pass_starIcon"),this.pointData.point>=this.pointData.pointTask_2&&(this.img_2.source="ui_pass_starIcon"),this.pointData.point>=this.pointData.pointTask_3&&(this.img_3.source="ui_pass_starIcon")},i.updatePointCombo=function(t){this.pointData.combo++,this.pointData.combo>this.pointData.comboMax&&(this.pointData.comboMax=this.pointData.combo),this.pointData.clear+=t,this.pointData.clearOnce+=t},i.comboToZero=function(){var t=5*(this.pointData.combo-1)+this.pointData.clearOnce;console.log("本轮消除评分："+t),this.pointData.combo=0,this.pointData.clearOnce=0},e}(eui.Component);egret.registerClass(PointPlayShow,"PointPlayShow");var TaskOne=function(t){function e(){t.call(this),this.taskPosPoint=new egret.Point,this.task={},this.task.task_type=-1}__extends(e,t);var s=(__define,e),i=s.prototype;return i.loadTaskInfo=function(t){this.task=t,this.isComplete=!1,t.task_type<0?(this.visible=!1,this.isComplete=!0):0===t.task_type?(this.taskNumber.text=t.task_number+"",this.iconDisplay.source=GameConfig.StarOneImg.getImgForLoadInfo(t.task_star)):1===t.task_type&&(this.taskNumber.text=t.task_number+""),this.taskPosPoint=this.localToGlobal(this.taskNumber.x,this.taskNumber.y,this.taskPosPoint),this.taskPosPoint.y=140},i.taskForClearStar=function(t){if(0!==this.task.task_type)return!1;if(t.typeId===this.task.task_star.typeId){if(this.task.task_star.colorId<1)return!0;if(t.colorId===this.task.task_star.colorId)return!0}return!1},i.taskForClearPos=function(t){},i.reduceTaskOnce=function(){this.task.task_number--,this.task.task_number<=0?(this.isComplete=!0,this.taskNumber.text="0"):this.taskNumber.text=this.task.task_number+""},e}(eui.Button);egret.registerClass(TaskOne,"TaskOne");var TaskPlayShow=function(t){function e(){t.call(this),this.taskPlayData={}}__extends(e,t);var s=(__define,e),i=s.prototype;return i.loadTaskInfo=function(t){t.length>0&&this.task_1.loadTaskInfo(t[0]),t.length>1&&this.task_2.loadTaskInfo(t[1]),t.length>2&&this.task_3.loadTaskInfo(t[2]),t.length>3&&this.task_4.loadTaskInfo(t[3]),this.taskPlayData.step=StarView.ThePassTaskStep,this.stepLeave.text=this.taskPlayData.step+""},i.taskForClearStar=function(t){!this.task_1.isComplete&&this.task_1.taskForClearStar(t)&&(this.task_1.reduceTaskOnce(),t.isTaskTargetStar=!0,t.starPlayEff(GameConfig.EffName.CLEAR_STAR_ON_TASK,this.task_1.taskPosPoint)),!this.task_2.isComplete&&this.task_2.taskForClearStar(t)&&(this.task_2.reduceTaskOnce(),t.isTaskTargetStar=!0,t.starPlayEff(GameConfig.EffName.CLEAR_STAR_ON_TASK,this.task_2.taskPosPoint)),!this.task_3.isComplete&&this.task_3.taskForClearStar(t)&&(this.task_3.reduceTaskOnce(),t.isTaskTargetStar=!0,t.starPlayEff(GameConfig.EffName.CLEAR_STAR_ON_TASK,this.task_3.taskPosPoint)),!this.task_4.isComplete&&this.task_4.taskForClearStar(t)&&(this.task_4.reduceTaskOnce(),t.isTaskTargetStar=!0,t.starPlayEff(GameConfig.EffName.CLEAR_STAR_ON_TASK,this.task_4.taskPosPoint))},i.costPlayStep=function(){return this.taskPlayData.step--,this.taskPlayData.step<0?void(this.stepLeave.text="0"):void(this.stepLeave.text=this.taskPlayData.step+"")},e}(eui.Component);egret.registerClass(TaskPlayShow,"TaskPlayShow");var ShopGoods=function(t){function e(){t.call(this),this.skinName="ShopGoodsSkin",this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchShopGoods,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.touchShopGoods=function(){console.log("点击了我")},e}(eui.Component);egret.registerClass(ShopGoods,"ShopGoods");var ShopMain=function(t){function e(){t.call(this),this.skinName="DimShopMainSkin",this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchCloseBtn,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.touchCloseBtn=function(){GameView.self.closeDimShop()},e}(eui.Component);egret.registerClass(ShopMain,"ShopMain");var SkillBtn=function(t){function e(){t.call(this),this.skillData={},this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickSkillBtn,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.clickSkillBtn=function(){this.skillData.skillFunc()},i.initPlaySkillBtn=function(t){this.skillId=t;var e=SkillDataGather.self["skill_"+t+"_data"];for(var s in e)this.skillData[s]=e[s];this.label=this.skillData.skillName},e}(eui.Button);egret.registerClass(SkillBtn,"SkillBtn");var SkillChangeColorShow=function(t){function e(){t.call(this),this.skinName="SkillChangeColorShowSkin",this.changeColor_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickImg,this),this.changeColor_2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickImg,this),this.changeColor_3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickImg,this),this.changeColor_4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickImg,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.clickImg=function(t){var e=0;"star_monster_1"===t.target.source?e=1:"star_monster_2"===t.target.source?e=2:"star_monster_3"===t.target.source?e=3:"star_monster_4"===t.target.source?e=4:"star_monster_5"===t.target.source&&(e=5),StarView.self.changeColor(2,-1,e)},i.setImgColor=function(t){for(var e=[],s=1;6>s;s++)s!==t&&e.push(s);this.changeColor_1.source="star_monster_"+e[0],this.changeColor_2.source="star_monster_"+e[1],this.changeColor_3.source="star_monster_"+e[2],this.changeColor_4.source="star_monster_"+e[3]},e}(eui.Component);egret.registerClass(SkillChangeColorShow,"SkillChangeColorShow");var SkillPlayShow=function(t){function e(){t.call(this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initSkillPlayShow=function(){this.skillBtn_1.initPlaySkillBtn(1),this.skillBtn_2.initPlaySkillBtn(2),this.skillBtn_3.initPlaySkillBtn(3),this.skillBtn_4.initPlaySkillBtn(4),this.skillBtn_5.initPlaySkillBtn(5)},e}(eui.Component);egret.registerClass(SkillPlayShow,"SkillPlayShow");var PosOne=function(t){function e(){t.call(this),this.posId=0,this.scaleX=this.scaleY=.5}__extends(e,t);var s=(__define,e),i=s.prototype;return i.initPosForType=function(t,e){},e}(eui.Button);egret.registerClass(PosOne,"PosOne");var StarOne=function(t){function e(){t.call(this),this.starId=null,this.posX=0,this.posY=0,this.isCheckForTheRound=!1,this.isCheckTheStar=!0,this.isCheckForSkill=!1,this.isCanClear=!0,this.isCanMove=!0,this.isTaskTargetStar=!1,this.skinName="StarOneSkin",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickStar,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.clickStar=function(){switch(StarView.state){case GameConfig.StarViewState.PLAY:this.isCheckTheStar&&StarView.self.checkStar(this.starId);break;case GameConfig.StarViewState.CHANGE_POS:if(!this.isCheckForSkill)return;0===StarView.self.changeRateIndex?StarView.self.changePos(1,this.starId):1===StarView.self.changeRateIndex&&StarView.self.changePos(2,-1,this.starId);break;case GameConfig.StarViewState.CHANGE_COLOR:if(!this.isCheckForSkill)return;StarView.self.changeColor(1,this.starId)}},i.canPushClearList=function(t){return this.isCheckForTheRound?!1:t.typeId===GameConfig.StarType.STAR&&this.typeId===GameConfig.StarType.STAR&&t.colorId===this.colorId?!0:!1},i.initStarForTypeId=function(t){switch(this.width=Math.floor(StarView.self.StarBox.width/StarView.ThePassStarInfoArr[0].length),this.height=Math.floor(StarView.self.StarBox.height/StarView.ThePassStarInfoArr.length),this.starImg.scaleX=this.starImg.scaleY=this.width/90,this.x=this.posX*this.width,this.y=this.posY*this.height,t.typeId){case GameConfig.StarType.NULL:this.typeId=-1,this.colorId=-1,this.starImg.source="",this.isCanClear=!1,this.isCanMove=!1;break;case GameConfig.StarType.STAR:this.typeId=0,this.randomStar(t.colorId),this.isCanClear=!0,this.isCanMove=!0;break;case GameConfig.StarType.STONE:this.typeId=3,this.randomStar(t.colorId),this.isCanClear=!1,this.isCanMove=!1}},i.randomStar=function(t){if(t>0&&6>t)this.setTheStarColor(t);else{var e=MixGame.getRandom(1,5);this.setTheStarColor(e)}},i.startClearTheStar=function(t){this.isCanClear&&(this.clearPosPoint=this.localToGlobal(this.starImg.x,this.starImg.y,this.clearPosPoint),GameView.self.gamePlayMain.taskPlayShow.taskForClearStar(this),GameView.self.gamePlayMain.pointPlayShow.addPointForClearStar(this),this.isTaskTargetStar||this.starPlayEff(GameConfig.EffName.CLEAR_STAR_NOT_TASK),this.isTaskTargetStar=!1,this.y=0-this.height*t,this.posY=-t,this.randomStar())},i.endClearTheStar=function(){},i.starPlayEff=function(t,e){StarView.state!==GameConfig.StarViewState.START&&GameView.self.EffBox.playEffForName(t,this,e)},i.starMovePos=function(t,e,s){if(void 0===s&&(s=!1),this.posX!==t||this.posY!==e){var i=Math.abs(t-this.posX)+Math.abs(e-this.posY);return s?egret.Tween.get(this).to({x:t*this.width,y:e*this.height},50*i):StarView.state===GameConfig.StarViewState.START?(this.x=t*this.width,this.y=e*this.height):egret.Tween.get(this).to({x:t*this.width,y:e*this.height},50*i).to({y:e*this.height-10},100).to({y:e*this.height},100),this.posX=t,this.posY=e,i}},i.canUsePropOrSkill=function(t){switch(t){case GameConfig.StarViewState.CHANGE_POS:return this.isCanMove?(this.setCanClickForSkill(!0),!0):(this.setCanClickForSkill(!1),!1);case GameConfig.StarViewState.CHANGE_COLOR:return this.typeId===GameConfig.StarType.STAR?!0:!1;case GameConfig.StarViewState.AGAIN_ARRAY:if(!this.isCanMove)return!1;if(this.typeId===GameConfig.StarType.STAR)return!0}return!1},i.setCanClickForSkill=function(t){t?(this.isCheckForSkill=!0,this.notClickImg.visible=!1):(this.isCheckForSkill=!1,this.notClickImg.visible=!0)},i.setTheStarColor=function(t){this.colorId=t,this.starImg.source=GameConfig.StarOneImg.getImgForLoadInfo({typeId:this.typeId,colorId:this.colorId})},e}(eui.Button);egret.registerClass(StarOne,"StarOne");var StarView=function(t){function e(){t.call(this),this.changeStarId=[],this.changeRateIndex=-1,e.self=this,this.skinName="StarViewSkin"}__extends(e,t);var s=(__define,e),i=s.prototype;return i.gameStart=function(t){GameView.self.touchChildren=!1,AllPassInfo["pass_"+t](),e.ThePassId=t,this.visible=!1,e.state=GameConfig.StarViewState.START,this.initStarView()},i.theStarViewStart=function(){GameView.self.gamePlayMain.skillPlayShow.initSkillPlayShow(),GameView.self.gamePlayMain.showTaskMain()},i.initStarAndPosList=function(){e.StarAndPosList=[];for(var t=0;10>t;t++){e.StarAndPosList[t]=[];for(var s=0;10>s;s++)e.StarAndPosList[t][s]={starId:-1,posId:-1}}},i.initStarView=function(){var t=e.ThePassStarInfoArr.length,s=e.ThePassStarInfoArr[0].length;if(this.initStarAndPosList(),e.StarOneList.length<1)for(var i=0;t*s>i;i++){var a=i%t,n=Math.floor(i/s),r=new StarOne;r.starId=i,r.posX=a,r.posY=-(s-n),r.initStarForTypeId(e.ThePassStarInfoArr[n][a]),e.StarAndPosList[a][n].starId=i,e.StarOneList.push(r),this.StarBox.addChild(r)}else for(var i=0;t*s>i;i++){var a=i%t,n=Math.floor(i/s),o=e.StarOneList[i];o.posX=a,o.posY=-(s-n),o.initStarForTypeId(e.ThePassStarInfoArr[n][a]),e.StarAndPosList[a][n].starId=i,this.StarBox.addChild(o)}e.ClearList=[],this.dropStar()},i.checkStar=function(t){e.StarOneList[t].isCheckTheStar&&(e.ClearList=[],this.checkClearList(t))},i.checkClearList=function(t,s){void 0===s&&(s=!1),e.ClearList.length<1&&e.ClearList.push(t);for(var i,a,n,r,o=e.StarOneList[t],h=[],l=0;l<e.ClearList.length;l++){var c=e.StarOneList[e.ClearList[l]];c.isCheckForTheRound||(c.posY>0&&(i=e.StarAndPosList[c.posX][c.posY-1].starId),c.posY<e.ThePassStarInfoArr.length-1&&(a=e.StarAndPosList[c.posX][c.posY+1].starId),c.posX>0&&(n=e.StarAndPosList[c.posX-1][c.posY].starId),c.posX<e.ThePassStarInfoArr[0].length-1&&(r=e.StarAndPosList[c.posX+1][c.posY].starId),(i||0===i)&&e.StarOneList[i].canPushClearList(o)&&h.push(i),(a||0===a)&&e.StarOneList[a].canPushClearList(o)&&h.push(a),(n||0===n)&&e.StarOneList[n].canPushClearList(o)&&h.push(n),(r||0===r)&&e.StarOneList[r].canPushClearList(o)&&h.push(r),c.isCheckForTheRound=!0)}if(e.ClearList=MixGame.unique(e.ClearList),h.length>0){for(var d=0;d<h.length;d++)e.ClearList.push(h[d]);this.checkClearList(t,s)}else{if(s){for(var f=0;f<e.ClearList.length;f++){var u=e.StarOneList[e.ClearList[f]];u.isCheckForTheRound=!1}return}e.ClearList.length<=1||(GameView.self.gamePlayMain.taskPlayShow.costPlayStep(),this.clearStar())}},i.getStarSameIndex=function(t){return e.ClearList=[],this.checkClearList(t,!0),e.ClearList.length},i.clearReward=function(t){},i.clearStar=function(){GameView.self.touchChildren=!1;for(var t=[[],[],[],[],[],[],[],[],[],[]],s=0;s<e.ClearList.length;s++){var i=e.StarOneList[e.ClearList[s]];i.isCanClear&&(e.StarAndPosList[i.posX][i.posY].starId=-1,t[i.posX].push(i.starId)),i.startClearTheStar(t[i.posX].length)}this.starNewOrder(t),e.state===GameConfig.StarViewState.START?this.dropStar():(GameView.self.gamePlayMain.pointPlayShow.updatePointCombo(e.ClearList.length),egret.setTimeout(function(){this.dropStar()},this,500))},i.starNewOrder=function(t){for(var s=0;s<e.ThePassStarInfoArr[0].length;s++)for(var i=e.ThePassStarInfoArr.length-1;i>=0;i--){var a=e.StarAndPosList[s][i].starId;if(0>a){var n,r=!0;if(1>i)n=t[s].shift(),r=!1;else{var o=i-1;for(n=e.StarAndPosList[s][o].starId;0>n||!e.StarOneList[n].isCanMove;)o--,0>o?(n=t[s].shift(),r=!1):n=e.StarAndPosList[s][o].starId}e.StarAndPosList[s][i].starId=n,r&&(e.StarAndPosList[s][o].starId=-1)}}},i.dropStar=function(t){void 0===t&&(t=!1);for(var s=0,i=0;i<e.ThePassStarInfoArr[0].length;i++)for(var a=0;a<e.ThePassStarInfoArr.length;a++){var n=e.StarOneList[e.StarAndPosList[i][a].starId];n.isCheckForTheRound=!1;var r=n.starMovePos(i,a,t);r>s&&(s=r)}e.state===GameConfig.StarViewState.START?this.initCheck():(s=50*s+200,egret.setTimeout(function(){this.initCheck()},this,s))},i.clearStepStar=function(){},i.initCheck=function(){GameView.self.touchChildren=!1;for(var t=0;t<e.StarOneList.length;t++){var s=e.StarOneList[t];s.sameIndex=this.getStarSameIndex(s.starId),s.idText.text=s.starId+""}var i=!0;return i&&(i=this.checkAllStarForEachTurn()),i&&GameView.self.gamePlayMain.pointPlayShow.comboToZero(),e.state===GameConfig.StarViewState.START&&i?(e.state=GameConfig.StarViewState.PLAY,void this.theStarViewStart()):(i&&(GameView.self.touchChildren=!0,i=GameView.self.gamePlayMain.allTaskComplete()),void(i&&GameView.self.gamePlayMain.taskPlayShow.taskPlayData.step<1&&GameView.self.gamePlayMain.gameOverShow(!1)))},i.checkAllStarForEachTurn=function(){var t=!1;e.ClearList=[];for(var s=0;s<e.StarOneList.length;s++){var i=e.StarOneList[s];i.sameIndex>=2&&!t&&(t=!0),i.sameIndex>=5&&e.ClearList.push(i.starId)}return t?e.ClearList.length>0?(this.clearStar(),!1):!0:(this.allStarAgainArray(),!1)},i.clearStarForIdArr=function(t,e){},i.clearListIsHaveProp=function(){},i.getStarIdForVer=function(t,e){},i.getStarIdForHor=function(t,e){},i.gameOver=function(){},i.changePos=function(t,s,i){switch(this.changeRateIndex=t,t){case-1:e.state=GameConfig.StarViewState.PLAY,this.changeStarId=[],this.setAllStarCanUseSkill(!0);break;case 0:e.state=GameConfig.StarViewState.CHANGE_POS;for(var a=0;a<e.StarOneList.length;a++){var n=e.StarOneList[a];n.canUsePropOrSkill(e.state)?n.setCanClickForSkill(!0):n.setCanClickForSkill(!1)}break;case 1:this.changeStarId[0]=s,this.setAllStarCanUseSkill(!1);var r=e.StarOneList[s];r.posY>0&&e.StarOneList[e.StarAndPosList[r.posX][r.posY-1].starId].canUsePropOrSkill(e.state),r.posY<e.ThePassStarInfoArr.length-1&&e.StarOneList[e.StarAndPosList[r.posX][r.posY+1].starId].canUsePropOrSkill(e.state),r.posX>0&&e.StarOneList[e.StarAndPosList[r.posX-1][r.posY].starId].canUsePropOrSkill(e.state),r.posX<e.ThePassStarInfoArr[r.posX].length-1&&e.StarOneList[e.StarAndPosList[r.posX+1][r.posY].starId].canUsePropOrSkill(e.state);break;case 2:this.changeStarId[1]=i,this.setAllStarCanUseSkill(!0),this.changeStarPos(this.changeStarId[0],this.changeStarId[1]),GameView.self.gamePlayMain.clickCanCelBtn()}},i.changeStarPos=function(t,s){var i=e.StarOneList[t],a=e.StarOneList[s],n={x:0,y:0},r={x:0,y:0};e.StarAndPosList[i.posX][i.posY].starId=s,e.StarAndPosList[a.posX][a.posY].starId=t,n.x=i.posX,n.y=i.posY,r.x=a.posX,r.y=a.posY,i.starMovePos(r.x,r.y),a.starMovePos(n.x,n.y),egret.setTimeout(this.initCheck,this,500)},i.changeColor=function(t,s,i){switch(this.changeStarColorShowMain||(this.changeStarColorShowMain=new SkillChangeColorShow,this.addChild(this.changeStarColorShowMain),this.changeStarColorShowMain.x=100,this.changeStarColorShowMain.y=100),this.changeRateIndex=t,this.changeStarColorShowMain.visible=!1,t){case-1:e.state=GameConfig.StarViewState.PLAY,this.changeStarId=[],this.setAllStarCanUseSkill(!0);break;case 0:e.state=GameConfig.StarViewState.CHANGE_COLOR;for(var a=0;a<e.StarOneList.length;a++){var n=e.StarOneList[a];n.canUsePropOrSkill(e.state)?n.setCanClickForSkill(!0):n.setCanClickForSkill(!1)}break;case 1:this.setAllStarCanUseSkill(!1),this.changeStarId[0]=s,this.changeStarColorShowMain.visible=!0;var r=e.StarOneList[s];this.changeStarColorShowMain.setImgColor(r.colorId);break;case 2:this.changeStarColor(this.changeStarId[0],i),GameView.self.gamePlayMain.clickCanCelBtn()}},i.changeStarColor=function(t,s){var i=e.StarOneList[t];i.setTheStarColor(s),egret.setTimeout(this.initCheck,this,500)},i.setAllStarCanUseSkill=function(t){for(var s=0;s<e.StarOneList.length;s++){var i=e.StarOneList[s];i.setCanClickForSkill(t)}},i.allStarAgainArray=function(){GameView.self.touchChildren=!1;for(var t=[],s=0;s<e.StarOneList.length;s++){var i=e.StarOneList[s];i.canUsePropOrSkill(GameConfig.StarViewState.AGAIN_ARRAY)&&(t.push(i.starId),e.StarAndPosList[i.posX][i.posY].starId=-2)}t.sort(function(){return Math.random()>.5?-1:1}),t.sort(function(){return Math.random()>.5?-1:1}),t.sort(function(){return Math.random()>.5?-1:1});for(var a=0,n=0;n<e.ThePassStarInfoArr[0].length;n++)for(var r=0;r<e.ThePassStarInfoArr.length;r++)-2===e.StarAndPosList[n][r].starId&&(e.StarAndPosList[n][r].starId=t[a],a++);this.dropStar(!0)},e.state=GameConfig.StarViewState.START,e.StarOneList=[],e.PosOneList=[],e.ClearList=[],e.ThePassType=-1,e.ThePassId=0,e.ThePassPointInfoArr=[],e.ThePassStarInfoArr=[[]],e.ThePassPosInfoArr=[[]],e.ThePassTaskInfoArr=[],e.ThePassTaskStep=0,e}(eui.Component);egret.registerClass(StarView,"StarView");