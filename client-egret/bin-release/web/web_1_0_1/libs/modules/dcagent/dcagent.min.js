var DCAgentPaymentConfig=function(){},DCAgentConfig=function(){},_classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("DCAgent",["exports"],t):t(e.DCAgent={})}(this,function(e){function t(){}function n(e){return"function"==typeof e}function r(e){var t,n;return t=Date.now(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n;return n=(t+16*Math.random())%16|0,t=Math.floor(t/16),"x"===e?n.toString(16):(7&n|8).toString(16)}),(e||"")+n.replace(/-/g,"").toUpperCase()}function o(e){var t,n;for(t in e)n=e[t],e[t]=n;return(2<=arguments.length?[].slice.call(arguments,1):[]).forEach(function(r){var o;o=[];for(t in r)n=r[t],o.push(e[t]=n);return o}),e}function i(e,t,r){if(n(e))try{return e.apply(t,r)}catch(o){a("attemp error for "+e.toString(),o.stack)}}function a(e,t){console.log("#DCAgent: "+e),t&&console.log(t)}function c(e){try{return e.setItem(".","."),e.removeItem("."),!0}catch(t){return!1}}function u(e,t,n){if(!e||e&&e.length>=n)return e;n=Math.ceil(n-e.length)/t.length,n=void 0===n?0:n;for(var r="",o=0;n>o;o+=1)r+=t;return e+r}function s(e,t,n){return function(){Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);var r,o;for(r=0;r<t.length;r+=1)if(o=t[r],!1===i(o,this,arguments))return;var a=i(e,this,arguments);if(!1===a)return!1;for(r=0;r<n.length;r+=1)o=n[r],i(o,this,arguments);return a}}function l(e){return e?(e=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/))&&e[3]:""}function f(e,t,n){return t=void 0===t?0:t,e>=1e21&&(e=9527e16),K.parseInt(e,void 0===n?10:n)||t}function g(e){return"undefined"!=typeof K[e]}function p(e,t){return e=h(e),$.setItem(e,t),jt.set(e,t,3650),t}function d(e){return e=h(e),$.getItem(e)||jt.get(e)}function h(e){return nt||gt===e?e:(Q.appId||a("appid should not be empty when you are in native env"),Q.appId+"."+e)}function m(e){var t=X.hash,n="!"+e,r="";if(t){var o=/![0-9A-Z]{32,128}/gi;(t=t.match(o))?(t=t[0].slice(1),e===t||d(st)||(r=t),X.href=X.href.replace(o,n)):X.href+=n}else X.href+="#"+n;return p(st,r),r}function v(e){e=h(e);try{var t=JSON.parse($.getItem(e));return Array.isArray(t)?t:[]}catch(n){return $.removeItem(e),[]}}function y(e,t){t=h(t);var n=v(t);Array.isArray(e)?e.forEach(function(e){return n.push(e)}):n.push(e),$.setItem(t,JSON.stringify(n))}function I(){$.removeItem(h(lt)),$.removeItem(h(ft))}function b(){K.addEventListener&&K.addEventListener("error",function(e){i(function(){if(wt.isReportAllowed(e.filename)){wt.count+=1;var t={};["colno","filename","lineno","message"].forEach(function(n){return t[n]=e[n]||"1"});var r=e.error||{};if(t.stack=encodeURIComponent(r.stack||r.stacktrace||""),t.type=r.name||"Error",t.timestamp=parseInt(e.timeStamp/1e3),n(Q.getErrorScene)&&(r=i(Q.getErrorScene,r,[e]))){if(r&&"[object Object]"===J.call(r)){var o,a="";for(o in r)a+="	"+o+"="+r[o]+"\n";r=a}else r=String(r);t.stack+="\n\nError scene:\n"+encodeURIComponent(r)}Dt.updateStorageByKey(t,ft)}})},!1)}function T(){if(!Kt){Kt={ver:Nt},Tt.split(",").forEach(function(e){Kt[e]=Q.hasOwnProperty(e)?Q[e]:""});for(var e in Ut)Kt[e]=Q[e]||Ut[e],Kt[e]||0===Kt[e]||(Kt[e]="")}return Kt}function E(){var e=T();return e.accountId=Q.accountId||Q.uid,(Et+","+St).split(",").forEach(function(t){e[t]=Q.hasOwnProperty(t)?Q[t]:""}),e}function S(e){var t=Jt();t.timeout=yt,t.open("POST",e.url,!0),t.setRequestHeader("Content-Type","text/plain; charset=UTF-8");var n=Date.now();t.onreadystatechange=function(){if(4===this.readyState){var t=200<=this.status&&300>this.status,r=Date.now()-n;i(t?e.success:e.error,this,[this,r]),i(e.complete,this,[this,r]),this.ontimeout=this.onreadystatechange=null}},t.ontimeout=function(){var t=Date.now()-n;i(e.error,this,[this,t,!0]),i(e.complete,this,[this,t]),this.ontimeout=this.onreadystatechange=null},t.send(JSON.stringify(e.data))}function x(e){var t=new egret.URLLoader,n=Date.now();t.addEventListener(egret.Event.COMPLETE,function(t){var r=Date.now()-n;t=t.target,i("success"===t.data?e.success:e.error,t,[t,r,r>=yt]),i(e.complete,t,[t,r])});var r=new egret.URLRequest(e.url);r.method=egret.URLRequestMethod.POST,r.data=JSON.stringify(e.data),t.load(r)}function C(e,t){if(e.data){e.data.errorInfoList&&e.data.errorInfoList.length>wt.max&&(a("sending too many errors, only "+wt.max+" allowed"),e.data.errorInfoList=e.data.errorInfoList.slice(0,wt.max));var n=o({headerInfo:E()},e.data);zt({url:Yt+"//"+t,data:n,success:function(t,n){Xt.succ=1,Xt.fail=0,Xt.total=n,i(e.success,t,[t,n])},error:function(t,n,r){Xt.succ=0,Xt.fail+=1,Xt.total+=n,Wt+=1,i(e.error,t,[t,n,r]),r&&a("report timeout, network infomation",Xt)},complete:function(t,n){Qt+=1,Dt.updateStorageByKey({eventId:vt,eventMap:Xt},lt),i(e.complete,t,[t,n])}}),a("report data:",n)}}function O(){if(qt)return qt;if(Zt+=1,!(Zt>4)){var e,t={egret:"egret",layabox:"layabox",cocos:"cc.game",impact:"ig",phaser:"Phaser",pixi:"PIXI",create:"createjs",three:"THREE",gameMaker:"asset_get_type",playCanvas:"pc.fw",turbulenz:"TurbulenzEngine",quintus:"Quintus",melon:"me.game",lychee:"lychee",wade:"wade.addSceneObject",crafty:"Crafty",lime:"lime.Scene",enchant:"enchant",isogenic:"IgeEngine",gameclosure:"GC.Application",panda:"game.Scene",kiwi:"Kiwi",jaws:"jaws",sirius2d:"ss2d",collie:"collie",physics:"Physics",stage:"Stage.Anim",babylon:"BABYLON"};for(e in t){var n=t[e];if(-1<n.indexOf(".")){var n=n.split("."),r=K[n[0]];if(r&&r[n[1]])return qt=e}else if(K[n])return qt=e}}}function j(e,t,n,r){var o=parseInt(Date.now()/1e3)-Q.loginTime||1;if(o>=It||0>=o)a("illegal online time: "+o);else{var c={data:{onlineInfo:{loginTime:Q.loginTime,onlineTime:o,extendMap:{from:Q.from,engine:O()||"",app:Q.app}},eventInfoList:e||[],errorInfoList:t||[]},success:r};n&&(c.data.userInfo=n),e=Dt.getStorageByKey(lt),t=Dt.getStorageByKey(ft),(e.length||t.length)&&(Dt.clear(),c.data.eventInfoList=c.data.eventInfoList.concat(e),c.data.errorInfoList=c.data.errorInfoList.concat(t),c.error=function(){a("report failed, restoring data to localStorage"),Dt.updateStorageByKey(c.data.eventInfoList,lt),Dt.updateStorageByKey(c.data.errorInfoList,ft),i(r,0,arguments)}),C(c,dt)}}function A(e){z&&q[z]||j(0,0,0,e)}function w(e,t){this.status="constructed",this.run=function(){en(this.timer),this.status="running",i(e);var n=this;this.timer=$t(function(){return n.run()},t)},this.stop=function(){this.status="stopped",en(this.timer)}}function _(e){if(Q.uid){var t=u(Q.uid,ht,mt);e!==t&&(Q.uid=t,a("do u know you are updating device id?"),p(ot,parseInt(Date.now()/1e3)),e=Q.uid)}if(!e){var n;try{if(W.realBrowser)n=new kt({canvas:!0,screen_resolution:!0,ie_activex:!0}).get().toString();else if(W.engine.layabox){var o=layabox.getDeviceInfo()||{};n=(n=o.mac||o.idfa)&&n.replace(/[-_:=\s]+/g,"").toUpperCase()}}catch(i){n=null}n=u(n,ht,mt),n||(n=Date.now().toString(36).toUpperCase(),n=r(W.engine.egret?it+n:W.engine.layabox?at+n:W.engine.cocos?ct+n:ut+n)),e=n}return n=e,p(gt,n),n}function L(e){var t=d(gt),n=t?0:1,t=_(t);Q.uid=t,Q.accountId=t,Q.interval=1e3*Math.max(bt,parseFloat(e.interval||bt)),Q.virus&&W.realBrowser&&(Q.parentId=m(t)),Q.errorReport&&(wt.excludes=Array.isArray(e.excludes)?wt.excludes.concat(e.excludes):[],b()),Q.timer=new w(A,Q.interval),Q.timer.status="running",Q.loginTime=parseInt(Date.now()/1e3),Q.initTime=Q.loginTime,t=d(ot),t||(t=Q.loginTime,p(ot,t)),Q.createTime=parseInt(t),n=n?{actTime:t,regTime:t,parentId:Q.parentId}:null,j([{eventId:xt,eventMap:{page:encodeURIComponent(W.realBrowser?X.pathname+X.search:"!")}}],0,n),$t(function(){return Q.timer.run()},Q.interval),tn(function(){var e=parseInt(Date.now()/1e3);p(pt,e)}),F.setUserOptions(e),F.inited=!0}function k(e){e=h(e);try{var t=JSON.parse($.getItem(e));return Array.isArray(t)?t:[]}catch(n){return $.removeItem(e),[]}}function D(e,t){t=h(t);var n=k(t);Array.isArray(e)?e.forEach(function(e){return n.push(e)}):n.push(e),$.setItem(t,JSON.stringify(n))}function N(){$.removeItem(h(lt)),$.removeItem(h(ft))}function R(e,t){if(!e)return a("invoke failed, missing eventId"),!1;2<arguments.length&&(t=arguments[2]);var n={};if(t&&"[object Object]"===J.call(t))for(var r in t)n[r.replace("%","_")]="number"==typeof t[r]?t[r]:encodeURIComponent(t[r]);rn.updateStorageByKey({eventId:e,eventMap:n},lt)}function P(e){return function(){var t=F.getLoginStatus();if(0===t)return a("DCAgent.login needed"),!1;if(1===t){var n=[e];return[].forEach.call(arguments,function(e){return n.push(e)}),un.push(n),!1}}}function U(){un.forEach(function(e){return cn[e.shift()].apply(0,e)}),un.length=0}function M(){en(nn);var e=Q.timer;e.stop(),nn=$t(function(){e.run()},Ct)}var V,B,G=0,F={getUserOptions:function(){return V},setUserOptions:function(e){V=JSON.stringify(e)},setLoginStatus:function(e){G=e},getLoginStatus:function(){return G}},H=(0,eval)("this"),K=H||{},q=H.document||{},X=H.location||{},J=Object.prototype.toString,z="hidden"in q?"hidden":"webkitHidden"in q?"webkitHidden":"mozHidden"in q?"mozHidden":"msHidden"in q?"msHidden":null,Q={age:0,gender:0,roleLevel:0,netType:3},W={get engine(){return et},get localStorage(){return tt},get realBrowser(){return nt},get cookie(){return rt}};if("function"==typeof q.createElement){var Y=q.createElement("div");if(Y&&"function"==typeof Y.querySelector){Y.innerHTML="<i></i>";var Z=Y.querySelector("i");B=!!Z&&"I"===Z.tagName}}var $,et={egret:g("egret"),layabox:g("layabox"),cocos:g("cc")},tt=!!K.localStorage||et.egret||et.cocos,nt=B,rt=nt&&"cookie"in q,ot="dcagent_create_time",it="EGRET",at="LAYA",ct="COCOS",ut="UE",st="dcagent_parent_id",lt="dcagent_client_events",ft="dcagent_client_errors",gt="dcagent_client_id",pt="dc_p_lo",dt="rd.gdatacube.net/dc/hh5/sync",ht="0A",mt=32,vt="DE_EVENT_OSS",yt=3e4,It=172800,bt=20,Tt="appId,appVersion,brand,channel,customDeviceId,idfa,imei,lonLat,mac,netType,operator,osVersion,platform,simCardOp,uid",Et="accountId,accountType,age,gender,gameServer",St="roleId,roleRace,roleClass,roleLevel",xt="DE_EVENT_PV",Ct=5e3;$=W.engine.egret?egret.localStorage:W.engine.cocos?cc.sys.localStorage:W.localStorage?K.localStorage:{getItem:t,setItem:t,removeItem:t};var Ot,jt=Ot=W.cookie?{get:function(e){return(e=q.cookie.match(new RegExp("(^|)\\s*"+e+"=([^\\s]*)")))&&3<=e.length?decodeURIComponent(e[2]):null},set:function(e,t,n,r,o,i){var a;n&&(a=new Date,a.setTime(a.getTime()+864e5*n)),n=n?" expires="+a.toGMTString():"",o=" path="+(o||"/"),r=r?" domain="+r:"",i=i?" secure":"",q.cookie=e+"="+encodeURIComponent(t)+n+o+r+i},remove:function(e,t,n){Ot.set(e,"",-1,t,n)}}:{get:t,set:t,remove:t},At={max:100,count:0,excludes:[],isReportAllowed:function(e){return At.count<At.max?At.excludes.every(function(t){return-1===e.indexOf(t)}):void 0}},wt=At,_t=K.screen,Lt=K.navigator,kt=function(){function e(t){_classCallCheck(this,e);var n,r;n=Array.prototype.forEach,r=Array.prototype.map,this.each=function(e,t,r){if(null!==e)if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===+e.length)for(var o=0,i=e.length;i>o&&t.call(r,e[o],o,e)!=={};o++);else for(o in e)if(e.hasOwnProperty(o)&&t.call(r,e[o],o,e)==={})break},this.map=function(e,t,n){var o=[];return null==e?o:r&&e.map===r?e.map(t,n):(this.each(e,function(e,r,i){o[o.length]=t.call(n,e,r,i)}),o)},"object"==typeof t?(this.hasher=t.hasher,this.screen_resolution=t.screen_resolution,this.screen_orientation=t.screen_orientation,this.canvas=t.canvas,this.ie_activex=t.ie_activex):"function"==typeof t&&(this.hasher=t)}return _createClass(e,[{key:"get",value:function(){var e=[];if(e.push(Lt.userAgent),e.push(Lt.language),e.push(_t.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(t.join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!K.indexedDB),q.body?e.push(typeof q.body.addBehavior):e.push("undefined"),e.push(typeof K.openDatabase),e.push(Lt.cpuClass),e.push(Lt.platform),e.push(Lt.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)}},{key:"murmurhash3_32_gc",value:function(e,t){var n,r,o,i,a;for(n=3&e.length,r=e.length-n,o=t,a=0;r>a;)i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,++a,i=3432918353*(65535&i)+((3432918353*(i>>>16)&65535)<<16)&4294967295,i=i<<15|i>>>17,i=461845907*(65535&i)+((461845907*(i>>>16)&65535)<<16)&4294967295,o^=i,o=o<<13|o>>>19,o=5*(65535&o)+((5*(o>>>16)&65535)<<16)&4294967295,o=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(i=0,n){case 3:e.charCodeAt(a+2);break;case 2:e.charCodeAt(a+1);break;case 1:i^=255&e.charCodeAt(a),i=3432918353*(65535&i)+((3432918353*(i>>>16)&65535)<<16)&4294967295,i=i<<15|i>>>17,o^=461845907*(65535&i)+((461845907*(i>>>16)&65535)<<16)&4294967295}return o^=e.length,o^=o>>>16,o=2246822507*(65535&o)+((2246822507*(o>>>16)&65535)<<16)&4294967295,o^=o>>>13,o=3266489909*(65535&o)+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^o>>>16)>>>0}},{key:"hasLocalStorage",value:function(){try{return!!K.localStorage}catch(e){return!0}}},{key:"hasSessionStorage",value:function(){try{return!!K.sessionStorage}catch(e){return!0}}},{key:"isCanvasSupported",value:function(){var e=q.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}},{key:"isIE",value:function(){return"Microsoft Internet Explorer"===Lt.appName||"Netscape"===Lt.appName&&/Trident/.test(Lt.userAgent)?!0:!1}},{key:"getPluginsString",value:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()}},{key:"getRegularPluginsString",value:function(){return this.map(Lt.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")}},{key:"getIEPluginsString",value:function(){return K.ActiveXObject?this.map("ShockwaveFlash.ShockwaveFlash;AcroPDF.PDF;PDF.PdfCtrl;QuickTime.QuickTime;rmocx.RealPlayer G2 Control;rmocx.RealPlayer G2 Control.1;RealPlayer.RealPlayer(tm) ActiveX Control (32-bit);RealVideo.RealVideo(tm) ActiveX Control (32-bit);RealPlayer;SWCtl.SWCtl;WMPlayer.OCX;AgControl.AgControl;Skype.Detection".split(";"),function(e){try{return new K.ActiveXObject(e),e}catch(t){return null}}).join(";"):""}},{key:"getScreenResolution",value:function(){return this.screen_orientation?_t.height>_t.width?[_t.height,_t.width]:[_t.width,_t.height]:[_t.height,_t.width]}},{key:"getCanvasFingerprint",value:function(){var e=q.createElement("canvas"),t=e.getContext("2d");return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText("http://www.dataeye.com/",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("http://www.dataeye.com/",4,17),e.toDataURL()}}]),e}(),Dt={get getStorageByKey(){return v},get updateStorageByKey(){return y},get clear(){return I}},Nt=20;e.version=Nt;var Rt,Pt,Ut={get resolution(){return Vt},get brand(){return Rt},get osVersion(){return Pt},get platform(){return Bt}},Mt=K.screen||{},Vt=Mt.width&&Mt.width+"*"+Mt.height,Bt=0;if(!K.navigator||!K.navigator.userAgent){var Gt=["ios","android"];if(et.layabox){var Ft=layabox.getDeviceInfo()||{},Vt=Ft.resolution||"0*0";Rt=Ft.phonemodel,Bt=Gt.indexOf(Ft.os.toLowerCase()),Pt=(Ft.os+" "+Ft.osversion).toLowerCase()}else if(et.cocos)var Ht=cc.view.getViewPortRect()||{},Vt=Ht.width+"*"+Ht.height,Bt=Gt.indexOf(cc.sys.os.toLowerCase());-1===[0,1,2,3].indexOf(Bt)&&(Bt=0)}Vt||(Vt="0*0");var Kt,qt,Xt={succ:0,fail:0,total:0},Jt=function(){return new K.XMLHttpRequest},zt=function(){return K.XMLHttpRequest?S:W.engine.cocos?(Jt=function(){return cc.loader.getXMLHttpRequest()},S):W.engine.egret?x:(a("XMLHttpRequest not found"),t)}(),Qt=0,Wt=0,Yt="https:"===X.protocol?"https:":"http:",Zt=0,$t=K.setTimeout,en=K.clearTimeout;et.egret&&($t=function(e,t){egret.setTimeout(e,K,t)},en=function(e){egret.clearTimeout(e)});var tn=function(e){if(K.addEventListener){var t;e:{t=["pagehide","beforeunload","unload"];for(var n=0;n<t.length;n+=1)if("on"+t[n]in K){t=t[n];break e}t=void 0}t&&K.addEventListener(t,e)}};e.init=function(e){c($)?F.inited||(e=e||{},e.appId?(["errorReport","virus"].forEach(function(t){return Q[t]=e.hasOwnProperty(t)?!!e[t]:!0}),Q.app=e.appName||"",Q.from=e.from||l(q.referrer),Q.getErrorScene=e.getErrorScene,Tt.split(",").forEach(function(t){e.hasOwnProperty(t)&&(Q[t]=e[t])}),L(e)):a("init failed, missing appId")):a(W.localStorage?"localstorage qouta error, private mode?":"localstorage is not supported.")};var nn,rn={get getStorageByKey(){return k},get updateStorageByKey(){return D},get clear(){return N}},on={get initBasedAPI(){return an},get loginBasedAPI(){return cn},get cacheBeforeLogin(){return P},get clearLoginInvokeList(){return U},get asap(){return M}},an={login:function(e){e?Q.accountId!==e&&(1===F.getLoginStatus()?a("cancel login, current login is not ready"):(Q.timer.stop(),F.setLoginStatus(1),A(function(){F.setLoginStatus(2),(Et+","+St).split(",").forEach(function(e){return delete Q[e]}),Q.age=0,Q.gender=0,Q.roleLevel=0,Q.loginTime=parseInt(Date.now()/1e3),Q.accountId=e,on.clearLoginInvokeList(),Q.timer.run()}))):a("account is empty")},onEvent:R},cn={onCoinGet:function(e,t,n,r){R("DE_EVENT_COIN_ACTION",{actionType:"coinGet",coinType:n,balanceNum:f(t),coinNum:f(e),reason:r})},onCoinUse:function(e,t,n,r){R("DE_EVENT_COIN_ACTION",{actionType:"coinUse",coinType:n,balanceNum:f(t),coinNum:f(e),reason:r})},onItemBuy:function(e,t,n,r,o){R("DE_EVENT_ITEM_ACTION",{actionType:"itemBuy",itemId:e,itemNum:f(t),coinType:n,coinNum:f(r),missonID:o})},onItemProduce:function(e,t,n,r){R("DE_EVENT_ITEM_ACTION",{actionType:"itemGet",itemId:e,itemNum:f(t),missonID:n,reason:r})},onItemUse:function(e,t,n,r){R("DE_EVENT_ITEM_ACTION",{actionType:"itemUse",itemId:e,itemNum:parseInt(t),reason:r,missonID:n})},onLevelUp:function(e,t,n){t=f(t),Q.roleLevel=t,R("DE_EVENT_LEVELUP",{startLevel:f(e),endLevel:t,duration:f(n)})},onMissionFinished:function(e,t){R("DE_EVENT_GUANKA_ACTION",{actionType:"guankaFinish",guankaId:e,duration:f(t)})},onMissionUnfinished:function(e,t){R("DE_EVENT_GUANKA_ACTION",{actionType:"guankaUnfinish",guankaId:e,duration:f(t)})},onPayment:function(e){e&&e.hasOwnProperty("amount")&&C({data:{paymentInfo:{currencyAmount:parseFloat(e.amount,10)||0,currencyType:e.currencyType||"CNY",payType:String(e.payType||""),iapid:String(e.iapid||""),payTime:f(Date.now()/1e3),extendMap:{orderId:String(e.orderId||"")}}}},dt)},onTaskFinished:function(e,t){R("DE_EVENT_TASK_ACTION",{actionType:"taskFinish",taskId:e,elapsed:f(t)})},onTaskUnfinished:function(e,t){R("DE_EVENT_TASK_ACTION",{actionType:"taskUnfinish",taskId:e,elapsed:f(t)})},setAccountType:function(e){Q.accountType=String(void 0===e?"":e)},setAge:function(e){e=f(e),Q.age=e>0&&128>e?e:0},setGameServer:function(e){Q.gameServer=String(void 0===e?"":e)},setGender:function(e){Q.gender=2===e?2:1},setRoleInfo:function(e,t,n,r){var o=arguments;St.split(",").forEach(function(e,t){return Q[e]=o[t]||""}),Q.roleLevel=f(r)||1}},un=[];e.player={get isNew(){return Q.createTime===Q.loginTime},get initTime(){return Q.initTime},get createTime(){return Q.createTime},get loginTime(){return Q.loginTime},get lastLogoutTime(){return f(d(pt))},get getReportCount(){return Qt},get getReportFailedCount(){return Wt}};var sn,ln=F.getUserOptions;for(sn in an)e[sn]=an[sn];for(sn in cn)e[sn]=s(cn[sn],[P(sn)],["onPayment"!==sn&&M]);var fn=K.DCAgentObject;if(fn){var gn=K[fn];if(n(gn)){var pn=gn.cache;pn.length&&(pn.forEach(function(t){i(e[t[0]],e,[].slice.call(t,1,void 0))}),pn.length=0)}}e.__options=ln});var DCAgentGender;!function(e){e[e.male=1]="male",e[e.female=2]="female"}(DCAgentGender||(DCAgentGender={}));